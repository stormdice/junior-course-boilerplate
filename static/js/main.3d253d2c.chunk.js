(this["webpackJsonpcsssr-school-course"]=this["webpackJsonpcsssr-school-course"]||[]).push([[0],{15:function(e,t,a){e.exports={categories:"CategoryList_categories__2rnyI",category:"CategoryList_category__3pyoU"}},16:function(e){e.exports=JSON.parse('{"a":[{"id":1,"title":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430. \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f clothes","img":"./img/product1.jpg","isInStock":true,"rating":4,"maxRating":5,"price":5000,"category":"clothes"},{"id":2,"title":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430. \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f books","img":"./img/product2.jpg","isInStock":false,"rating":4,"maxRating":5,"price":10000,"category":"books"},{"id":3,"title":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430. \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f clothes","img":"./img/product3.jpg","isInStock":true,"rating":4,"maxRating":5,"price":20000,"subPriceContent":15000,"discount":25,"category":"clothes"},{"id":4,"title":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430. \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f books","img":"./img/product4.jpg","isInStock":true,"rating":4,"maxRating":5,"price":30000,"subPriceContent":15000,"discount":50,"category":"books"},{"id":5,"title":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u044f\u0442\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430. \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f clothes","img":"./img/product5.jpg","isInStock":true,"rating":4,"maxRating":5,"price":25000,"category":"clothes"},{"id":6,"title":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0448\u0435\u0441\u0442\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430. \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f books","img":"./img/product6.jpg","isInStock":false,"rating":4,"maxRating":5,"price":40000,"subPriceContent":20000,"discount":50,"category":"books"}]}')},17:function(e,t,a){e.exports={price:"ProductPrice_price__2kDg9",unit:"ProductPrice_unit__2uLmR",small:"ProductPrice_small__-ieXG"}},18:function(e,t,a){e.exports={products:"ProductsList_products__1_lC7",star:"ProductsList_star__3F-kB",fill:"ProductsList_fill__3ZgbJ"}},23:function(e,t,a){e.exports={input:"CategoryCheckbox_input__1gWP9",label:"CategoryCheckbox_label__OSvUV"}},26:function(e,t,a){e.exports={input:"InputPrice_input__19jGe"}},28:function(e,t,a){e.exports={reset:"ResetFilters_reset__XpRua"}},3:function(e,t,a){e.exports={pagination:"Pagination_pagination__OC-M1",item:"Pagination_item__3ZJ_K",link:"Pagination_link__3uDZR",active:"Pagination_active__2HDgo",prev:"Pagination_prev__1UqIA"}},30:function(e,t,a){e.exports={title:"Title_title__1e_J_"}},31:function(e,t,a){e.exports={container:"App_container__RHEYp"}},33:function(e,t,a){e.exports=a(53)},4:function(e,t,a){e.exports={filter:"FiltersForm_filter__3_BtC",fieldset:"FiltersForm_fieldset__hBPGJ",title:"FiltersForm_title__1vhst"}},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),i=a.n(c),o=a(2),l=a(5),s=a(6),u=a(8),m=a(7),p=a(14),d=a.n(p),g=function(e){var t,a=function(t){Object(u.a)(n,t);var a=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).handleChange=function(t){var a=t.target,n=0===d()(a.value)?"":d()(a.value);e.props.handleInputChange(n)},e}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{handleInputChange:this.handleChange}))}}]),n}(n.Component);return a.displayName="withInputValidation(".concat((t=e).displayName||t.name||"Component",")"),a},f=a(26),h=a.n(f),_=function(e){var t=e.name,a=e.placeholder,n=e.value,c=e.handleInputChange;return r.a.createElement("input",{type:"text",className:h.a.input,name:t,placeholder:a,value:n,onChange:c,required:!0})},E=a(27),P=a.n(E),C=function(e){var t=e.title,a=e.name,n=e.handleInputChange,c=e.discount;return r.a.createElement(P.a,{title:t,name:a,value:c,onChange:n})},b=g(_),y=g(_),v=g(C),x=a(9),N=a.n(x),O=function(e){var t=e.handleInputChange,a=e.min,n=e.max,c=e.minProductPrice,i=e.maxProductPrice;return r.a.createElement("div",{className:N.a.container},r.a.createElement("label",{className:N.a.field},r.a.createElement("span",{className:N.a.label},"\u043e\u0442"),r.a.createElement(b,{name:"min",placeholder:c,value:a,handleInputChange:t("min")})),r.a.createElement("label",{className:N.a.field},r.a.createElement("span",{className:N.a.label},"\u0434\u043e"),r.a.createElement(y,{name:"max",placeholder:i,value:n,handleInputChange:t("max")})))},k=Object(o.b)((function(e){return{min:e.min,max:e.max,minProductPrice:e.minProductPrice,maxProductPrice:e.maxProductPrice}}))((function(e){var t=e.handleInputChange,a=e.min,n=e.max,c=e.minProductPrice,i=e.maxProductPrice;return r.a.createElement(O,{handleInputChange:t,min:a,max:n,minProductPrice:c,maxProductPrice:i})})),I=a(32),j=a(23),R=a.n(j),S=function(e){var t=e.name,a=e.title,n=e.handleCategoryChange,c=e.categories.some((function(e){return e===t}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:R.a.input,type:"checkbox",id:t,name:t,onChange:function(e){var t=e.target;n(t.checked)},checked:c}),r.a.createElement("label",{className:R.a.label,htmlFor:t},a))},T=a(15),U=a.n(T),w=function(e){var t=e.handleCategoryChange,a=e.categories;return r.a.createElement("ul",{className:U.a.categories},r.a.createElement("li",{className:U.a.category},r.a.createElement(S,{name:"books",title:"Books",handleCategoryChange:t("books"),categories:a})),r.a.createElement("li",{className:U.a.category},r.a.createElement(S,{name:"clothes",title:"Clothes",handleCategoryChange:t("clothes"),categories:a})))},F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).parseCategoriesQueryFromUrl=function(){var t=new URL(window.location.href).searchParams.get("categories");e.setState({categories:t?t.split(","):[]})},e.getChangeHandlerForCategories=function(t){return function(a){var n=new Set(e.props.categories);n[a?"add":"delete"](t),e.props.changeCategory(Object(I.a)(n))}},e}return Object(s.a)(a,[{key:"addCategoriesQueryToUrl",value:function(){var e=new URL(window.location.href);e.searchParams.set("categories",this.props.categories),window.history.pushState(null,null,e)}},{key:"componentDidMount",value:function(){this.parseCategoriesQueryFromUrl(),window.addEventListener("popstate",this.parseCategoriesQueryFromUrl)}},{key:"componentDidUpdate",value:function(e,t){e.categories!==this.props.categories&&this.addCategoriesQueryToUrl()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.parseCategoriesQueryFromUrl)}},{key:"render",value:function(){var e=this.props.categories;return r.a.createElement(w,{handleCategoryChange:this.getChangeHandlerForCategories,categories:e})}}]),a}(n.Component),M=Object(o.b)((function(e){return{categories:e.categories}}),(function(e){return{changeCategory:function(t){return e(function(e){return{type:"CHANGE_CATEGORIES",payload:e}}(t))}}}))(F),D=Object(o.b)((function(e){return{discount:e.discount}}))((function(e){var t=e.handleInputChange,a=e.discount;return r.a.createElement(v,{title:"\u0421\u043a\u0438\u0434\u043a\u0430",name:"discount",handleInputChange:t,discount:a})})),L=a(28),A=a.n(L),V=function(e){var t=e.handleClick;return r.a.createElement("button",{className:A.a.reset,type:"button",onClick:t},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b")},G=Object(o.b)((function(e){return{min:e.min,max:e.max,discount:e.discount,categories:e.categories}}),(function(e){return{resetFilters:function(){return e({type:"RESET_FILTERS"})}}}))((function(e){var t=e.resetFilters;return r.a.createElement(V,{handleClick:function(){return t()}})})),J=a(4),X=a.n(J),B=function(e){var t=e.handleInputChange;return r.a.createElement("form",{className:X.a.filter},r.a.createElement("fieldset",{className:X.a.fieldset},r.a.createElement("legend",{className:X.a.title},"\u0426\u0435\u043d\u0430"),r.a.createElement(k,{handleInputChange:t})),r.a.createElement("fieldset",{className:X.a.fieldset},r.a.createElement(D,{handleInputChange:t("discount")})),r.a.createElement("fieldset",{className:X.a.fieldset},r.a.createElement("legend",{className:X.a.title},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(M,null)),r.a.createElement(G,null))},Q=Object(o.b)((function(e){return{maxProductPrice:e.maxProductPrice}}),(function(e){return{setInputValue:function(t,a){return e(function(e,t){return{type:"SET_INPUT_VALUE",payload:{fieldName:e,fieldValue:t}}}(t,a))}}}))((function(e){var t,a=e.maxProductPrice,n=e.setInputValue;return r.a.createElement(B,{handleInputChange:(t=a,function(e){return function(a){if(!("min"===e&&a>t))return"discount"===e&&a>100?a:void n(e,a)}})})})),H=a(16),W=a(10),Z=a.n(W),q=a(29),K=a.n(q),Y=a(11),z=a(17),$=a.n(z),ee=function(e){var t=e.price,a=e.isSubPrice;return r.a.createElement("div",{className:Z()([$.a.price],{[$.a.small]:a})},Object(Y.formatMoney)(t,0," "," ")," ",r.a.createElement("span",{className:$.a.unit},"\u20bd"))},te=a(18),ae=a.n(te),ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?r.a.createElement(ee,{price:e,isSubPrice:t}):""},re=function(e){var t=e.isFilled;return r.a.createElement("div",{className:Z()(ae.a.star,t&&ae.a.fill)})},ce=function(e){var t=e.products.map((function(e){var t=e.id,a=e.isInStock,n=e.img,c=e.title,i=e.price,o=e.subPriceContent,l=e.maxRating,s=e.rating;return r.a.createElement("li",{key:t,"data-testid":"product-list-item"},r.a.createElement(K.a,{isInStock:a,img:n,title:c,price:ne(i),subPriceContent:ne(o,!0),maxRating:l,rating:s,ratingComponent:re}))}));return r.a.createElement("ul",{className:ae.a.products},t)},ie=a(3),oe=a.n(ie),le=function(e){e.preventDefault(),"A"===e.target.tagName&&(window.history.pushState({},"page 2","?pageNum=2"),console.log(e.target.href))},se=function(){return r.a.createElement("ul",{className:oe.a.pagination,onClick:le},r.a.createElement("li",{className:oe.a.item},r.a.createElement("a",{className:oe.a.link,href:"/?prevPage"},"\u043d\u0430\u0437\u0430\u0434")),r.a.createElement("li",{className:oe.a.item},r.a.createElement("a",{className:oe.a.link,href:"/?pageNum=1"},"1")),r.a.createElement("li",{className:oe.a.item},r.a.createElement("a",{className:oe.a.link,href:"/?pageNum=2"},"2")),r.a.createElement("li",{className:oe.a.item},r.a.createElement("span",{className:oe.a.link},"...")),r.a.createElement("li",{className:oe.a.item},r.a.createElement("a",{className:oe.a.link,href:"/?nextPage"},"\u0432\u043f\u0435\u0440\u0435\u0434")))},ue=a(30),me=a.n(ue),pe=function(){return r.a.createElement("h1",{className:me.a.title},"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432")},de=function(e){var t=e.products;return r.a.createElement("div",null,r.a.createElement(pe,null),r.a.createElement(ce,{products:t}),r.a.createElement(se,null))},ge=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getFilteredProducts",value:function(e){var t=e.products,a=e.min,n=e.max,r=e.discount,c=e.categories;return t.filter((function(e){return function(e,t,a){return""===a?e:e.price>=t&&e.price<=a}(e,a,n)&&function(e,t){var a=e.discount;return 0===t||a===t}(e,r)&&function(e,t){var a=e.category;return 0===t.length||t.includes(a)}(e,c)}))}},{key:"componentDidMount",value:function(){this.props.getProducts(),this.props.setMinProductPrice(),this.props.setMaxProductPrice()}},{key:"render",value:function(){var e=this.props.products.sort((function(e,t){return e.price-t.price}));return r.a.createElement(de,{products:this.getFilteredProducts({products:e,min:this.props.min,max:this.props.max,discount:this.props.discount,categories:this.props.categories})})}}]),a}(n.Component),fe=Object(o.b)((function(e){return{products:e.products,setMinProductPrice:e.setMinProductPrice,setMaxProductPrice:e.setMaxProductPrice,min:e.min,max:e.max,discount:e.discount,categories:e.categories}}),(function(e){var t=Object(Y.minBy)((function(e){return e.price}),H.a).price,a=Object(Y.maxBy)((function(e){return e.price}),H.a).price;return{getProducts:function(){return e({type:"GET_PRODUCTS",payload:H.a})},setMinProductPrice:function(){return e({type:"SET_MIN_PRODUCT_PRICE",payload:t})},setMaxProductPrice:function(){return e({type:"SET_MAX_PRODUCT_PRICE",payload:a})}}}))(ge),he=a(31),_e=a.n(he),Ee=function(){return r.a.createElement("div",{className:_e.a.container},r.a.createElement(Q,null),r.a.createElement(fe,null))},Pe=a(13),Ce=a(1),be={products:[],min:"",minProductPrice:0,max:"",maxProductPrice:0,discount:0,categories:[]},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRODUCTS":return Object(Ce.a)(Object(Ce.a)({},e),{},{products:t.payload});case"SET_MIN_PRODUCT_PRICE":return Object(Ce.a)(Object(Ce.a)({},e),{},{minProductPrice:t.payload});case"SET_MAX_PRODUCT_PRICE":return Object(Ce.a)(Object(Ce.a)({},e),{},{maxProductPrice:t.payload});case"CHANGE_CATEGORIES":return Object(Ce.a)(Object(Ce.a)({},e),{},{categories:t.payload});case"SET_MIN_PRICE_INPUT_VALUE":return Object(Ce.a)(Object(Ce.a)({},e),{},{min:t.payload});case"SET_INPUT_VALUE":return Object(Ce.a)(Object(Ce.a)({},e),{},{[t.payload.fieldName]:t.payload.fieldValue});case"RESET_FILTERS":return Object(Ce.a)(Object(Ce.a)({},e),{},{min:"",max:"",discount:0,categories:[]});default:return e}},ve=Object(Pe.b)(ye,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),xe=document.getElementById("root");i.a.render(r.a.createElement(o.a,{store:ve},r.a.createElement(Ee,null)),xe)},9:function(e,t,a){e.exports={container:"PriceRange_container__3UoQJ",field:"PriceRange_field__3pUfM",label:"PriceRange_label__17WTG"}}},[[33,1,2]]]);
//# sourceMappingURL=main.3d253d2c.chunk.js.map