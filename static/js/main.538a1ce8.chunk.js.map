{"version":3,"sources":["components/FiltersForm/FiltersForm.module.css","components/PriceRange/PriceRange.module.css","components/Pagination/Pagination.module.css","components/CategoryList/CategoryList.module.css","components/ProductPrice/ProductPrice.module.css","components/ProductsList/ProductsList.module.css","components/CategoryCheckbox/CategoryCheckbox.module.css","components/InputPrice/InputPrice.module.css","components/ResetFilters/ResetFilters.module.css","components/Title/Title.module.css","components/Products/Products.module.css","components/App/App.module.css","components/LogRender/index.js","components/LogRender/LogRender.js","HOC/withInputValidation/index.js","HOC/withInputValidation/withInputValidation.js","components/InputPrice/index.js","components/InputPrice/InputPrice.js","contexts/FormContext.js","components/Discount/index.js","components/Discount/Discount.js","components/Inputs/Inputs.js","components/PriceRange/index.js","components/PriceRange/PriceRange.js","components/CategoryCheckbox/CategoryCheckbox.js","components/CategoryList/index.js","components/CategoryList/CategoryList.js","components/ResetFilters/index.js","components/ResetFilters/ResetFilters.js","components/FiltersForm/index.js","components/FiltersForm/FiltersForm.js","components/ProductPrice/index.js","components/ProductPrice/ProductPrice.js","components/ProductsList/ProductsList.js","components/ProductsList/index.js","components/Pagination/Pagination.js","components/Pagination/index.js","components/Title/index.js","components/Title/Title.js","components/Products/Products.js","components/Products/index.js","components/App/index.js","components/App/App.js","index.js"],"names":["module","exports","LogRender","nextProps","nextState","logger","call","this","constructor","name","shallowCompare","Component","withInputValidation","HoccedComponent","WrappedComponent","handleChange","target","value","toInt","props","handleInputChange","displayName","InputPrice","placeholder","type","className","s","input","onChange","required","React","createContext","FormProvider","Provider","FormConsumer","Consumer","Discount","title","discount","InputMin","InputMax","InputDiscount","PriceRange","min","max","minProductPrice","maxProductPrice","container","field","label","CategoryCheckbox","handleCategoryChange","isChecked","categories","some","category","id","checked","htmlFor","CategoryList","ResetFilters","handleResetFilters","reset","onClick","FiltersForm","filter","fieldset","ProductPrice","price","isSubPrice","cn","small","formatMoney","unit","renderPrice","ratingComponent","isFilled","star","fill","ProductsList","renderProducts","products","map","isInStock","img","subPriceContent","maxRating","rating","key","data-testid","paginationItems","additionalClass","Pagination","pagination","setAdditionalClass","undefined","item","link","href","Title","Products","propTypes","pt","array","isRequired","App","state","parseCategoriesQueryFromUrl","URL","window","location","searchParams","get","setState","split","getChangeHandlerForCategories","fieldName","uniqueCategories","Set","getChangeHandlerFor","fieldValue","addEventListener","productItems","sort","a","b","minBy","product","maxBy","_prevProps","prevState","addCategoriesQueryToUrl","removeEventListener","url","set","history","pushState","isProductPriceInRange","discountPercent","isProductContainsFilteredDiscount","length","includes","isProductContainsFilteredCategory","filteredProducts","getFilteredProducts","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.538a1ce8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"filter\":\"FiltersForm_filter__3_BtC\",\"fieldset\":\"FiltersForm_fieldset__hBPGJ\",\"title\":\"FiltersForm_title__1vhst\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PriceRange_container__3UoQJ\",\"field\":\"PriceRange_field__3pUfM\",\"label\":\"PriceRange_label__17WTG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__OC-M1\",\"item\":\"Pagination_item__3ZJ_K\",\"link\":\"Pagination_link__3uDZR\",\"prev\":\"Pagination_prev__1UqIA\",\"next\":\"Pagination_next__1-gwL\",\"active\":\"Pagination_active__2HDgo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"categories\":\"CategoryList_categories__2rnyI\",\"category\":\"CategoryList_category__3pyoU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"price\":\"ProductPrice_price__2kDg9\",\"unit\":\"ProductPrice_unit__2uLmR\",\"small\":\"ProductPrice_small__-ieXG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"products\":\"ProductsList_products__1_lC7\",\"star\":\"ProductsList_star__3F-kB\",\"fill\":\"ProductsList_fill__3ZgbJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"CategoryCheckbox_input__1gWP9\",\"label\":\"CategoryCheckbox_label__OSvUV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"InputPrice_input__19jGe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reset\":\"ResetFilters_reset__XpRua\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Title_title__1e_J_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"products\":\"Products_products__3V_y4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__RHEYp\"};","import LogRender from './LogRender';\r\n\r\nexport default LogRender;\r\n","import shallowCompare from 'react-addons-shallow-compare';\r\nimport { logger } from 'csssr-school-utils';\r\nimport { Component } from 'react';\r\n\r\nclass LogRender extends Component {\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    logger.call(this, this.constructor.name, nextProps, nextState);\r\n\r\n    return shallowCompare(this, nextProps, nextState);\r\n  }\r\n}\r\n\r\nexport default LogRender;\r\n","import withInputValidation from './withInputValidation';\r\n\r\nexport default withInputValidation;\r\n","import React, { Component } from 'react';\nimport toInt from 'csssr-school-utils/lib/toInt';\n\nconst getDisplayName = WrappedComponent => {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nconst withInputValidation = HoccedComponent => {\n  class withInputValidation extends Component {\n    handleChange = ({ target }) => {\n      const value = toInt(target.value) === 0 ? '' : toInt(target.value);\n\n      this.props.handleInputChange(value);\n    };\n\n    render() {\n      return (\n        <HoccedComponent\n          {...this.props}\n          handleInputChange={this.handleChange}\n        />\n      );\n    }\n  }\n\n  withInputValidation.displayName = `withInputValidation(${getDisplayName(\n    HoccedComponent\n  )})`;\n\n  return withInputValidation;\n};\n\nexport default withInputValidation;\n","import InputPrice from './InputPrice';\r\n\r\nexport default InputPrice;\r\n","import React from 'react';\nimport s from './InputPrice.module.css';\n\nconst InputPrice = ({ name, placeholder, value, handleInputChange }) => {\n  return (\n    <input\n      type=\"text\"\n      className={s.input}\n      name={name}\n      placeholder={placeholder}\n      value={value}\n      onChange={handleInputChange}\n      required\n    />\n  );\n};\n\nexport default InputPrice;\n","import React from 'react';\r\n\r\nconst {\r\n  Provider: FormProvider,\r\n  Consumer: FormConsumer\r\n} = React.createContext();\r\n\r\nexport { FormProvider, FormConsumer };\r\n","import Discount from './Discount';\r\n\r\nexport default Discount;\r\n","import React from 'react';\r\nimport DiscountComponent from 'csssr-school-input-discount';\r\nimport { FormConsumer } from '../../contexts';\r\n\r\nconst Discount = ({ title, name, handleInputChange }) => {\r\n  return (\r\n    <FormConsumer>\r\n      {({ discount }) => (\r\n        <DiscountComponent\r\n          title={title}\r\n          name={name}\r\n          value={discount}\r\n          onChange={handleInputChange}\r\n        />\r\n      )}\r\n    </FormConsumer>\r\n  );\r\n};\r\n\r\nexport default Discount;\r\n","import withInputValidation from '../../HOC/withInputValidation';\r\nimport InputPrice from '../InputPrice';\r\nimport Discount from '../Discount';\r\n\r\nconst InputMin = withInputValidation(InputPrice);\r\nconst InputMax = withInputValidation(InputPrice);\r\nconst InputDiscount = withInputValidation(Discount);\r\n\r\nexport { InputMin, InputMax, InputDiscount };\r\n","import PriceRange from './PriceRange';\r\n\r\nexport default PriceRange;\r\n","import React from 'react';\nimport { InputMin, InputMax } from '../Inputs';\nimport { FormConsumer } from '../../contexts';\nimport pt from 'prop-types';\nimport s from './PriceRange.module.css';\n\nconst PriceRangeForm = ({ handleInputChange }) => {\n  return (\n    <FormConsumer>\n      {({ min, max, minProductPrice, maxProductPrice }) => (\n        <>\n          <div className={s.container}>\n            <label className={s.field}>\n              <span className={s.label}>от</span>\n              <InputMin\n                name=\"min\"\n                placeholder={minProductPrice}\n                value={min}\n                handleInputChange={handleInputChange('min')}\n              />\n            </label>\n            <label className={s.field}>\n              <span className={s.label}>до</span>\n              <InputMax\n                name=\"max\"\n                placeholder={maxProductPrice}\n                value={max}\n                handleInputChange={handleInputChange('max')}\n              />\n            </label>\n          </div>\n        </>\n      )}\n    </FormConsumer>\n  );\n};\n\nPriceRangeForm.propTypes = {\n  handleInputChange: pt.func.isRequired\n};\n\nexport default PriceRangeForm;\n","import React from 'react';\r\nimport pt from 'prop-types';\r\nimport s from './CategoryCheckbox.module.css';\r\n\r\nconst CategoryCheckbox = ({\r\n  name,\r\n  title,\r\n  handleCategoryChange,\r\n  categories\r\n}) => {\r\n  const handleChange = ({ target }) => {\r\n    handleCategoryChange(target.checked);\r\n  };\r\n\r\n  const isChecked = categories.some(category => category === name);\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        className={s.input}\r\n        type=\"checkbox\"\r\n        id={name}\r\n        name={name}\r\n        onChange={handleChange}\r\n        checked={isChecked}\r\n      />\r\n      <label className={s.label} htmlFor={name}>\r\n        {title}\r\n      </label>\r\n    </>\r\n  );\r\n};\r\n\r\nCategoryCheckbox.propTypes = {\r\n  name: pt.string.isRequired,\r\n  title: pt.string.isRequired,\r\n  handleCategoryChange: pt.func.isRequired\r\n};\r\n\r\nexport default CategoryCheckbox;\r\n","import CategoryList from './CategoryList';\r\n\r\nexport default CategoryList;\r\n","import React from 'react';\r\nimport CategoryCheckbox from '../CategoryCheckbox/CategoryCheckbox';\r\nimport { FormConsumer } from '../../contexts/FormContext';\r\nimport pt from 'prop-types';\r\nimport s from './CategoryList.module.css';\r\n\r\nconst CategoryList = ({ handleCategoryChange }) => {\r\n  return (\r\n    <FormConsumer>\r\n      {({ categories }) => {\r\n        return (\r\n          <ul className={s.categories}>\r\n            <li className={s.category}>\r\n              <CategoryCheckbox\r\n                name=\"books\"\r\n                title=\"Books\"\r\n                handleCategoryChange={handleCategoryChange('books')}\r\n                categories={categories}\r\n              />\r\n            </li>\r\n            <li className={s.category}>\r\n              <CategoryCheckbox\r\n                name=\"clothes\"\r\n                title=\"Clothes\"\r\n                handleCategoryChange={handleCategoryChange('clothes')}\r\n                categories={categories}\r\n              />\r\n            </li>\r\n          </ul>\r\n        );\r\n      }}\r\n    </FormConsumer>\r\n  );\r\n};\r\n\r\nCategoryList.propTypes = {\r\n  handleCategoryChange: pt.func.isRequired\r\n};\r\n\r\nexport default CategoryList;\r\n","import ResetFilters from './ResetFilters';\r\n\r\nexport default ResetFilters;\r\n","import React from 'react';\r\nimport pt from 'prop-types';\r\nimport s from './ResetFilters.module.css';\r\n\r\nconst ResetFilters = ({ handleResetFilters }) => (\r\n  <button className={s.reset} type=\"button\" onClick={handleResetFilters}>\r\n    Сбросить фильтры\r\n  </button>\r\n);\r\n\r\nResetFilters.propTypes = {\r\n  handleResetFilters: pt.func.isRequired\r\n};\r\n\r\nexport default ResetFilters;\r\n","import FiltersForm from './FiltersForm';\r\n\r\nexport default FiltersForm;\r\n","import React from 'react';\r\nimport LogRender from '../LogRender';\r\nimport PriceRange from '../PriceRange';\r\nimport CategoryList from '../CategoryList';\r\nimport { InputDiscount } from '../Inputs';\r\nimport ResetFilters from '../ResetFilters';\r\nimport s from './FiltersForm.module.css';\r\n\r\nexport default class FiltersForm extends LogRender {\r\n  render() {\r\n    const {\r\n      handleInputChange,\r\n      handleCategoryChange,\r\n      handleResetFilters\r\n    } = this.props;\r\n\r\n    return (\r\n      <form className={s.filter}>\r\n        <fieldset className={s.fieldset}>\r\n          <legend className={s.title}>Цена</legend>\r\n          <PriceRange handleInputChange={handleInputChange} />\r\n        </fieldset>\r\n        <fieldset className={s.fieldset}>\r\n          <InputDiscount\r\n            title=\"Скидка\"\r\n            name=\"discount\"\r\n            handleInputChange={handleInputChange('discount')}\r\n          />\r\n        </fieldset>\r\n        <fieldset className={s.fieldset}>\r\n          <legend className={s.title}>Категории</legend>\r\n          <CategoryList handleCategoryChange={handleCategoryChange} />\r\n        </fieldset>\r\n        <ResetFilters handleResetFilters={handleResetFilters} />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import ProductPrice from './ProductPrice';\r\n\r\nexport default ProductPrice;\r\n","import React from 'react';\r\nimport cn from 'classnames';\r\nimport pt from 'prop-types';\r\nimport { formatMoney } from 'csssr-school-utils';\r\nimport s from './ProductPrice.module.css';\r\n\r\nconst ProductPrice = ({ price, isSubPrice }) => {\r\n  return (\r\n    <div className={cn([s.price], { [s.small]: isSubPrice })}>\r\n      {formatMoney(price, 0, ' ', ' ')} <span className={s.unit}>&#x20bd;</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nProductPrice.propTypes = {\r\n  price: pt.number.isRequired,\r\n  isSubPrice: pt.bool.isRequired\r\n};\r\n\r\nexport default ProductPrice;\r\n","import React from 'react';\nimport pt from 'prop-types';\nimport cn from 'classnames';\nimport ProductItem from 'csssr-school-product-card';\nimport ProductPrice from '../ProductPrice';\nimport s from './ProductsList.module.css';\n\nconst renderPrice = (price, isSubPrice = false) => {\n  return price ? <ProductPrice price={price} isSubPrice={isSubPrice} /> : '';\n};\n\nconst ratingComponent = ({ isFilled }) => {\n  return <div className={cn(s.star, isFilled && s.fill)} />;\n};\n\nconst ProductsList = ({ products }) => {\n  const renderProducts = products.map(\n    ({\n      id,\n      isInStock,\n      img,\n      title,\n      price,\n      subPriceContent,\n      maxRating,\n      rating\n    }) => {\n      return (\n        <li key={id} data-testid=\"product-list-item\">\n          <ProductItem\n            isInStock={isInStock}\n            img={img}\n            title={title}\n            price={renderPrice(price)}\n            subPriceContent={renderPrice(subPriceContent, true)}\n            maxRating={maxRating}\n            rating={rating}\n            ratingComponent={ratingComponent}\n          />\n        </li>\n      );\n    }\n  );\n\n  return <ul className={s.products}>{renderProducts}</ul>;\n};\n\nProductsList.propTypes = {\n  products: pt.array.isRequired\n};\n\nexport default ProductsList;\n","import ProductsList from './ProductsList';\r\n\r\nexport default ProductsList;\r\n","import React from 'react';\r\nimport cn from 'classnames';\r\nimport s from './Pagination.module.css';\r\n\r\nconst paginationItems = [\r\n  {\r\n    title: 'Назад',\r\n    additionalClass: 'prev'\r\n  },\r\n  {\r\n    title: '1'\r\n  },\r\n  {\r\n    title: '2'\r\n  },\r\n  {\r\n    title: '3'\r\n  },\r\n  {\r\n    title: '4'\r\n  },\r\n  {\r\n    title: '5'\r\n  },\r\n  {\r\n    title: '...'\r\n  },\r\n  {\r\n    title: '13'\r\n  },\r\n  {\r\n    title: 'Вперед',\r\n    additionalClass: 'next'\r\n  }\r\n];\r\n\r\nconst renderPaginationItems = () => {\r\n  return paginationItems.map(({ title, additionalClass }) => {\r\n    const setAdditionalClass =\r\n      additionalClass !== undefined ? s[additionalClass] : '';\r\n\r\n    return (\r\n      <li className={s.item} key={title}>\r\n        <a\r\n          className={cn(s.link, setAdditionalClass)}\r\n          href=\"https://github.com/stormdice\"\r\n        >\r\n          {title}\r\n        </a>\r\n      </li>\r\n    );\r\n  });\r\n};\r\n\r\nconst Pagination = () => {\r\n  return <ul className={s.pagination}>{renderPaginationItems()}</ul>;\r\n};\r\n\r\nexport default Pagination;\r\n","import Pagination from './Pagination';\r\n\r\nexport default Pagination;\r\n","import Title from './Title';\r\n\r\nexport default Title;\r\n","import React from 'react';\r\nimport s from './Title.module.css';\r\n\r\nconst Title = () => {\r\n  return <h1 className={s.title}>Список товаров</h1>;\r\n};\r\n\r\nexport default Title;\r\n","import React from 'react';\r\nimport pt from 'prop-types';\r\nimport LogRender from '../LogRender';\r\nimport ProductsList from '../ProductsList';\r\nimport Pagination from '../Pagination';\r\nimport Title from '../Title';\r\nimport s from './Products.module.css';\r\n\r\nexport default class Products extends LogRender {\r\n  render() {\r\n    const { products } = this.props;\r\n\r\n    return (\r\n      <div className={s.products}>\r\n        <Title />\r\n        <ProductsList products={products} />\r\n        <Pagination />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nProducts.propTypes = {\r\n  products: pt.array.isRequired\r\n};\r\n","import Products from './Products';\r\n\r\nexport default Products;\r\n","import App from './App';\r\n\r\nexport default App;\r\n","import React, { Component } from 'react';\nimport { productItems } from '../../products.json';\nimport FiltersForm from '../FiltersForm';\nimport Products from '../Products';\nimport { minBy, maxBy } from 'csssr-school-utils';\nimport { FormProvider } from '../../contexts';\nimport s from './App.module.css';\n\nconst DISCOUNT_LIMIT = 100;\n\nconst isProductPriceInRange = (product, min, max) =>\n  max === '' ? product : product.price >= min && product.price <= max;\n\nconst isProductContainsFilteredDiscount = ({ discount }, discountPercent) =>\n  discountPercent === 0 || discount === discountPercent;\n\nconst isProductContainsFilteredCategory = ({ category }, categories) =>\n  categories.length === 0 || categories.includes(category);\n\nexport default class App extends Component {\n  state = {\n    products: [],\n    min: '',\n    minProductPrice: 0,\n    max: '',\n    maxProductPrice: 0,\n    discount: 0,\n    categories: []\n  };\n\n  componentDidMount() {\n    this.parseCategoriesQueryFromUrl();\n\n    window.addEventListener('popstate', this.parseCategoriesQueryFromUrl);\n\n    this.setState({\n      products: productItems.sort((a, b) => a.price - b.price),\n      minProductPrice: minBy(product => product.price, productItems).price,\n      maxProductPrice: maxBy(product => product.price, productItems).price\n    });\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.categories !== this.state.categories) {\n      this.addCategoriesQueryToUrl();\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('popstate', this.parseCategoriesQueryFromUrl);\n  }\n\n  addCategoriesQueryToUrl() {\n    const url = new URL(window.location.href);\n\n    url.searchParams.set('categories', this.state.categories);\n    window.history.pushState(null, null, url);\n  }\n\n  parseCategoriesQueryFromUrl = () => {\n    const url = new URL(window.location.href);\n    const categories = url.searchParams.get('categories');\n\n    this.setState({\n      categories: categories ? categories.split(',') : []\n    });\n  };\n\n  getChangeHandlerForCategories = fieldName => {\n    return isChecked => {\n      const uniqueCategories = new Set(this.state.categories);\n      const method = isChecked ? 'add' : 'delete';\n      uniqueCategories[method](fieldName);\n\n      this.setState({\n        categories: [...uniqueCategories]\n      });\n    };\n  };\n\n  getChangeHandlerFor = fieldName => {\n    return fieldValue => {\n      if (fieldName === 'min' && fieldValue > this.state.maxProductPrice) {\n        return;\n      }\n\n      if (fieldName === 'discount' && fieldValue > DISCOUNT_LIMIT) {\n        return this.state.discount;\n      }\n\n      this.setState({ [fieldName]: fieldValue });\n    };\n  };\n\n  getFilteredProducts({ products, min, max, discount, categories }) {\n    return products.filter(\n      product =>\n        isProductPriceInRange(product, min, max) &&\n        isProductContainsFilteredDiscount(product, discount) &&\n        isProductContainsFilteredCategory(product, categories)\n    );\n  }\n\n  handleResetFilters = () => {\n    this.setState({\n      min: '',\n      max: '',\n      discount: 0,\n      categories: []\n    });\n  };\n\n  render() {\n    const { products, min, max, discount, categories } = this.state;\n    const filteredProducts = this.getFilteredProducts({\n      products,\n      min,\n      max,\n      discount,\n      categories\n    });\n\n    return (\n      <FormProvider value={this.state}>\n        <div className={s.container}>\n          <FiltersForm\n            handleInputChange={this.getChangeHandlerFor}\n            handleCategoryChange={this.getChangeHandlerForCategories}\n            handleResetFilters={this.handleResetFilters}\n          />\n          <Products products={filteredProducts} />\n        </div>\n      </FormProvider>\n    );\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\n\r\nconst rootElement = document.getElementById('root');\r\n\r\nReactDOM.render(<App />, rootElement);\r\n"],"sourceRoot":""}